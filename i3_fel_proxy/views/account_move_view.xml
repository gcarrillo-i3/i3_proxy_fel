<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record model="ir.ui.view" id="account_move_form_fel_gt">
			<field name="name">account.move.form.fel_gt</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_move_form"/>
			<field name="arch" type="xml">


				<xpath expr="//group[@id='header_left_group']" position="inside">
					<separator colspan="2" string="DATOS FACTURACIÓN FEL"   invisible="state == 'draft'"/>
					<field name="serie_fel" 
							invisible="move_type == 'in_invoice' or state == 'draft'"
							readonly="state == 'posted'"						
						/>
						<!-- attrs="{'invisible': ['|',('move_type', '=', 'in_invoice'),('state', '=', 'posted')], 'readonly':[('state', '=', 'posted')]}"  -->
					<field name="numero_dte_sat"
							invisible="move_type == 'in_invoice' or state == 'draft'"
							readonly="state == 'posted'"						
							 />
					<field name="numero_dte_uuid" 
							invisible="move_type == 'in_invoice' or state == 'draft'"
							readonly="state == 'posted'"						
					/>					
				</xpath>
				

				<!--<xpath expr="//group[@id='header_right_group']/div[@name='journal_div']" position="after">
					 <field name="son_servicios" 
							widget="boolean_toggle" 
							invisible="move_type == 'in_invoice' or state != 'posted'"
							readonly="state == 'posted'"		
							/> 
					 <field name="correlativo_fact_empresa" 
							invisible="move_type == 'in_invoice' or correlativo_fact_empresa != 'posted' or state != 'posted'"
							readonly="state == 'posted'"	/>				
				</xpath>-->

				<xpath expr="//page[@name='other_info']/group/group/field[@name='ref']" position="after">
					<field name="enlace_fel_pdf" 
							invisible="move_type == 'in_invoice'  or state == 'draft'"
							readonly="state == 'posted'"	/>
					<field name="enlace_fel_xml"
							invisible="move_type == 'in_invoice' or state == 'draft'"
							readonly="state == 'posted'"/>
				</xpath>

				<xpath expr="//page[@name='other_info']/group/group/field[@name='partner_bank_id']" position="after">
					<separator colspan="2" string="FACTURA ANULACIÓN" />
					<field name="motivo_fel" />
				</xpath>
			</field>
		</record>


		<record id="fel_gt_view_move_form_anulacion_fel" model="ir.ui.view">
			<field name="name">fel.gt.account.move.form</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_move_form"/>
			<field name="arch" type="xml">
				<button name="button_draft" position="after">
					<button name="button_cancel" id="button_cancel" string="Anular Factura" class="btn-primary" type="object" 
							invisible="state in ['cancel', 'draft']"
							confirm="¿Estás seguro que quieres anular?" />
				</button>

				<!-- <button name="preview_invoice" position="after">
					<button string="Crear Correlativo" name="construir_correlativo_interno" type="object" class="oe_highlight" 
					attrs="{'invisible': ['|',('move_type', '=', 'in_invoice'), ('correlativo_fact_empresa', '!=', True), ('state', '=', 'posted')]}"/>
				</button> -->
			</field>
		</record>



		<record id="view_company_form_fel_gt_fel" model="ir.ui.view">
			<field name="name">res.company.form.fel_gt</field>
			<field name="model">res.company</field>
			<field name="inherit_id" ref="base.view_company_form"/>
			<field name="arch" type="xml">
				<!-- <xpath expr="//field[@name='vat']" position="attributes">
					<attribute name="string">NIT</attribute>
				</xpath> -->

				<notebook position="inside">
					<page string="FEL I3">
						<group>
							<group>
								<field name="usuario_proxy" />
								<field name="clave_proxy" />
								<field name="token_firma_fel" />
								<field name="es_pruebas_fel" widget="boolean_toggle"/>
								<field name="token_por_factura" widget="boolean_toggle"/>
							</group>
							<group>
								<field name="frases_fel"/>
								<field name="escenario_fel"/>
							</group>
						</group>
					</page>
				</notebook>

			</field>
		</record>

<!-- 
		<record id="account_invoice_tree_extra_fel_1" model="ir.ui.view">
			<field name="name">account.invoice.tree.extra.fel.1</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_out_invoice_tree"/>
			<field name="arch" type="xml">
				<xpath expr="//field[@name='name']" position="after">
					<field name="correlativo_fact_empresa" optional="hide" />

				</xpath>
			</field>
			 
		</record>-->
			<record id="account_invoice_filter_extra_fel_1" model="ir.ui.view">
			<field name="name">account.invoice.filter.extra.fel.1</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_account_invoice_filter"/>
			<field name="arch" type="xml">
				<xpath expr="//field[@name='name']" position="after">
					<separator/>
					<field name="serie_fel" string="SERIE FEL" filter_domain="[('serie_fel','ilike',self)]"/>
					<!-- <field name="correlativo_fact_empresa" string="CORR. INTERNO" filter_domain="[('correlativo_fact_empresa','ilike',self)]"/> -->
					<field name="numero_dte_sat" string="NUMERO SAT" filter_domain="[('numero_dte_sat','ilike',self)]"/>

				</xpath>
			</field>
		</record>
	</data>
</odoo>